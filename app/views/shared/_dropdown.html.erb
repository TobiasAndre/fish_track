<div
  class="relative"
  data-controller="dropdown"
  data-action="
    click@window->dropdown#closeOnClickOutside
    keydown@window->dropdown#closeOnEscape
  "
>
  <!-- Trigger -->
  <button
    data-action="click->dropdown#toggle"
    class="flex items-center gap-2 px-3 py-2 rounded-lg
           bg-gray-200 dark:bg-gray-800 cursor-pointer
           text-gray-800 dark:text-gray-100
           hover:bg-gray-300 dark:hover:bg-gray-700 transition">

    <span class="text-sm font-medium">
      <%= current_user.email %>
    </span>

    <svg class="w-4 h-4 opacity-70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  <!-- Menu -->
  <div
    data-dropdown-target="menu"
    class="hidden absolute right-0 mt-2 w-44
           bg-white dark:bg-gray-900
           border border-gray-200 dark:border-gray-800
           rounded-lg shadow-lg overflow-hidden z-50">

    <%= link_to edit_user_registration_path,
      class: "flex items-center gap-3 px-3 py-2 rounded-lg
              text-gray-700 dark:text-gray-200
              hover:bg-gray-100 dark:hover:bg-gray-800 transition" do %>

      <!-- Profile icon -->
      <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5z" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M20 21a8 8 0 0 0-16 0" />
      </svg>

      <span data-sidebar-target="label" class="text-sm font-medium">
        Profile
      </span>
    <% end %>

    <div class="border-t border-gray-200 dark:border-gray-800"></div>

    <!-- Logout -->
    <%= button_to destroy_user_session_path,
      method: :delete,
      class: "w-full flex items-center gap-3 px-3 py-2 rounded-lg
              text-red-600 dark:text-red-400 cursor-pointer
              hover:bg-red-50 dark:hover:bg-red-950 transition text-left" do %>

      <!-- Logout icon -->
      <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 12H3" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M7 8l-4 4 4 4" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 3v18" />
      </svg>

      <span data-sidebar-target="label" class="text-sm font-medium">
        Logout
      </span>
    <% end %>
  </div>
</div>