<!-- ========================================================= -->
<!-- Mobile overlay + drawer -->
<!-- ========================================================= -->
<div
  data-sidebar-target="overlay"
  class="hidden lg:hidden fixed inset-0 z-50"
  role="dialog"
  aria-modal="true"
  aria-label="Mobile navigation"
>
  <!-- Backdrop -->
  <button
    type="button"
    class="absolute inset-0 bg-black/50 opacity-0 transition-opacity duration-200
           data-[open=true]:opacity-100"
    data-action="click->sidebar#closeMobile"
    aria-label="Close menu"
  ></button>

  <!-- Drawer -->
  <aside
    data-sidebar-target="mobileDrawer"
    data-open="false"
    class="absolute left-0 top-0 h-full
           w-[85vw] max-w-xs
           bg-white dark:bg-gray-900
           border-r border-gray-200 dark:border-gray-800
           shadow-2xl
           -translate-x-full transition-transform duration-200 ease-out
           data-[open=true]:translate-x-0
           flex flex-col
           pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)]"
  >
    <!-- Header -->
    <div class="px-4 h-16 flex items-center justify-between border-b border-gray-200 dark:border-gray-800">
      <span class="font-semibold text-gray-800 dark:text-gray-100">Fish Track</span>

      <button
        type="button"
        class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition"
        data-action="click->sidebar#closeMobile"
        aria-label="Close menu"
      >
        âœ•
      </button>
    </div>

    <!-- Navigation -->
    <nav class="p-3 space-y-1 overflow-y-auto flex-1 overscroll-contain">
      <%= link_to root_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
        <span>ğŸ“Š</span><span class="text-sm font-medium">Dashboard</span>
      <% end %>

      <%= link_to edit_company_path(current_user.company), class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
        <span>ğŸ¢</span><span class="text-sm font-medium">Empresa</span>
      <% end %>

      <%= link_to units_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
        <span>ğŸ“</span><span class="text-sm font-medium">Unidades</span>
      <% end %>

      <%= link_to ponds_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
        <span>ğŸ’§</span><span class="text-sm font-medium">AÃ§udes</span>
      <% end %>

      <%= link_to batches_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
        <span>ğŸ“¦</span><span class="text-sm font-medium">Lotes</span>
      <% end %>

      <%= link_to employees_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
        <span>ğŸ‘¥</span><span class="text-sm font-medium">FuncionÃ¡rios</span>
      <% end %>

      <%= link_to payroll_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
        <span>ğŸ§¾</span><span class="text-sm font-medium">Folha</span>
      <% end %>

      <%= link_to financial_entries_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
        <span>ğŸ’³</span><span class="text-sm font-medium">Financeiro</span>
      <% end %>
    </nav>

    <!-- Footer -->
    <div class="p-3 border-t border-gray-200 dark:border-gray-800">
      <%= button_to destroy_user_session_path, method: :delete,
        class: "w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950" do %>
        <span>ğŸšª</span><span class="text-sm font-medium">Logout</span>
      <% end %>
    </div>
  </aside>
</div>

<!-- ========================================================= -->
<!-- Desktop sidebar -->
<!-- ========================================================= -->
<aside
  data-sidebar-target="sidebar"
  class="hidden lg:flex flex-col w-64
         bg-white dark:bg-gray-900
         border-r border-gray-200 dark:border-gray-800"
>
  <!-- Header -->
  <div class="h-16 px-4 flex items-center justify-between border-b border-gray-200 dark:border-gray-800">
    <span class="font-semibold text-gray-800 dark:text-gray-100" data-sidebar-target="label">
      Fish Track
    </span>

    <button
      data-action="click->sidebar#toggleCollapse"
      class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition"
      aria-label="Toggle sidebar"
    >
      â˜°
    </button>
  </div>

  <!-- Navigation -->
  <nav class="p-3 space-y-1 flex-1 overflow-y-auto">
    <%= link_to root_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
      <span>ğŸ“Š</span><span data-sidebar-target="label">Dashboard</span>
    <% end %>

    <%= link_to edit_company_path(current_user.company), class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
      <span>ğŸ¢</span><span data-sidebar-target="label">Empresa</span>
    <% end %>

    <%= link_to units_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
      <span>ğŸ“</span><span data-sidebar-target="label">Unidades</span>
    <% end %>

    <%= link_to ponds_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
      <span>ğŸ’§</span><span data-sidebar-target="label">AÃ§udes</span>
    <% end %>

    <%= link_to batches_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
      <span>ğŸ“¦</span><span data-sidebar-target="label">Lotes</span>
    <% end %>

    <%= link_to employees_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
      <span>ğŸ‘¥</span><span data-sidebar-target="label">FuncionÃ¡rios</span>
    <% end %>

    <%= link_to payroll_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
      <span>ğŸ§¾</span><span data-sidebar-target="label">Folha</span>
    <% end %>

    <%= link_to financial_entries_path, class: "flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" do %>
      <span>ğŸ’³</span><span data-sidebar-target="label">Financeiro</span>
    <% end %>
  </nav>

  <!-- Footer -->
  <div class="p-3 border-t border-gray-200 dark:border-gray-800">
    <%= button_to destroy_user_session_path, method: :delete,
      class: "w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-950" do %>
      <span>ğŸšª</span><span data-sidebar-target="label">Logout</span>
    <% end %>
  </div>
</aside>